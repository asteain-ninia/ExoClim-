# 現状 (課題整理)

## 範囲と前提
- 調査対象: フロントエンド/シミュレーション実装/ドキュメント一部
- 動作確認: 未実施 (コードリードのみ)

## 未実装
- 日射/熱力学/水文学/気候区分がスタブのため、温度/降水/気候区分/全球平均などが実値になっていない
  - 参照: `services/physics/insolation.ts`, `services/physics/thermodynamics.ts`, `services/physics/hydrology.ts`, `services/classification.ts`, `services/climateEngine.ts`, `components/Charts.tsx`, `components/visualizer/PixelRenderer.ts`
- Step 4 (気流詳細) がスタブかつ描画モードが存在せず、表示が空になる
  - 参照: `services/physics/airflow.ts`, `App.tsx`, `components/visualizer/PixelRenderer.ts`
- システム診断は形だけで、実質的な検証がない
  - 参照: `utils/testSuite.ts`, `components/TestOverlay.tsx`

## バグ
- カスタムマップ読込が反映されない (config.customMap が初期化処理に渡らない)
  - 参照: `App.tsx`, `services/geography.ts`, `components/Controls.tsx`
- oceanCurrent の「年平均」表示が 1月固定
  - 参照: `components/visualizer/OverlayRenderer.ts`

## 設計/仕様不備
- UIで操作できるパラメータと計算実装の乖離が大きく、変更が結果に反映されない箇所が多数
  - 参照: `components/Controls.tsx`, `services/physics/*.ts`, `services/climateEngine.ts`
- ステップ表記の不整合 (UI上は Step2 が海流、実装上は Step2 が風帯、Step3 が海流)
  - 参照: `components/Controls.tsx`, `App.tsx`

## 未使用/死蔵パラメータ (効果なし)
- 風帯: `windDoldrumsWidthDeg`, `windTradePeakWidthDeg` は計算に未使用
  - 参照: `services/physics/windBelts.ts`, `constants.ts`, `types.ts`
- 海流: `oceanShelfAngle`, `oceanDeflectLat`, `oceanSplitOffset`, `oceanCoastDist`, `oceanWestwardAttractionFactor`, `oceanEcPolewardDrift`, `oceanImpactThreshold` は計算に未使用
  - 参照: `services/physics/ocean.ts`, `constants.ts`, `types.ts`
- 惑星/大気: `gravity`, `eccentricity`, `semiMajorAxis`, `solarLuminosity`, `perihelionAngle`, `greenhouseFactor`, `albedoLand`, `albedoOcean`, `albedoIce`, `lapseRate`, `heatCapacityOcean`, `meridionalTransport` は計算に未使用
  - 参照: `services/physics/*.ts`, `constants.ts`, `types.ts`

## 再現性/運用上の懸念
- `Math.random()` が地形生成や海流の一部に使用され、同条件でも結果が再現しない
  - 参照: `services/geography.ts`, `services/physics/ocean.ts`

## パフォーマンス/UX
- 重い計算をメインスレッドで実行するため、解像度が高いとUIフリーズの可能性が高い
  - 参照: `services/climateEngine.ts`, `services/physics/ocean.ts`, `components/OceanDebugView.tsx`

## 技術的負債/不要コード
- 使用されていない App コンポーネントが残存
  - 参照: `components/App.tsx`, `index.tsx`
- Deprecated なデバッグ用モジュールが残存
  - 参照: `services/physics/oceanDebugger.ts`
